!function(e){e.fn.extend({smoothGallery:function(s){var t={animSpeed:180,delaySpeed:50,visibleRows:2,animEasing:"easeOutQuart"},s=e.extend(t,s);return this.each(function(){jQuery.fn.reverse=[].reverse,setHeight=function(){var t=e(".sg-item").outerHeight(),i=t*s.visibleRows,a=parseInt(e(".sg-item").css("top")),n=Math.round(Math.abs(a)/t)*t;e(".sg-item").css("top","-"+n+"px"),e(".sg").css("height",i)},modalHeight=function(){if(e(".sg-modal").length){var s=parseInt(e(".sg-modal img").height()),t=parseInt(e(window).height());s+50>t&&(e(".sg-modal img").css("height",t-20),e("#bug").html("smaller"))}},e(".sg-up").addClass("sg-disabled"),e(".sg").show(),setHeight(),e(window).resize(function(){setHeight(),modalHeight()}),slideDown=function(){if(e(".sg-item").is(":animated"))return!1;var t=parseInt(e(".sg-item").last().css("top")),i=parseInt(e(".sg-item").last().outerHeight()),a=parseInt(e(".sg-item").last().outerWidth()),n=e(".sg-item").length,d=parseInt(e(".sg").width()),o=parseInt(e(".sg").height()),g=Math.floor(d/a),l=Math.ceil(n/g),r=l*i,m=o/i*i;-(r-m)>=t||(e(".sg-up").removeClass("sg-disabled"),e(".sg-item").each(function(t){itemHeight2=parseInt(e(".sg-item").outerHeight()),e(this).delay(s.delaySpeed*t).animate({top:"-="+itemHeight2+"px"},s.animSpeed,s.animEasing)}),-(r-m)+i>=t&&e(".sg-down").addClass("sg-disabled")),event.preventDefault()},e(document.body).on("click",".sg-down",function(){slideDown()}),e(document).keydown(function(e){return 40==e.keyCode?(slideDown(),!1):void 0}),slideUp=function(){if(e(".sg-item").is(":animated"))return!1;if("0px"==e(".sg-item").first().css("top"));else{e(".sg-down").removeClass("sg-disabled"),e(".sg-item").reverse().each(function(t){itemHeight2=parseInt(e(".sg-item").outerHeight()),e(this).delay(s.delaySpeed*t).animate({top:"+="+itemHeight2+"px"},s.animSpeed,s.animEasing)});var t=parseInt(e(".sg-item").last().outerHeight());parseInt(e(".sg-item").first().css("top"))==0-t&&e(".sg-up").addClass("sg-disabled")}event.preventDefault()},e(document.body).on("click",".sg-up",function(){slideUp()}),e(document).keydown(function(e){return 38==e.keyCode?(slideUp(),!1):void 0}),e(document.body).on("click",".sg-item a",function(s){var t=e(this).attr("title"),i=e(this).attr("href");e("body").append(e(this).attr("title")?'<div class="sg-modal"><div class="sg-modal-h"><div class="sg-modal-v"><div class="sg-modal-img-wrap"><img src="'+i+'"/><a href="#" id="sg-close">&times;</a></div><br><div class="sg-caption">'+t+"</div></div></div></div>":'<div class="sg-modal"><div class="sg-modal-h"><div class="sg-modal-v"><div class="sg-modal-img-wrap"><img src="'+i+'"/><a href="#" id="sg-close">&times;</a></div></div></div></div>'),e(".sg-modal").fadeIn(300,function(){modalHeight()}),s.preventDefault()}),e(document.body).on("click","#sg-close",function(s){e(".sg-modal").fadeOut(300,function(){e(this).remove()}),s.preventDefault()})})}})}(jQuery);